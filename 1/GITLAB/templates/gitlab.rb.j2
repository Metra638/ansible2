# Основной URL
external_url 'http://{{ gitlab_external_url | default(ansible_host) }}'

# Настройка email
gitlab_rails['gitlab_email_from'] = 'gitlab@{{ gitlab_external_url | default(ansible_host) }}'
gitlab_rails['gitlab_email_reply_to'] = 'noreply@{{ gitlab_external_url | default(ansible_host) }}'

# Настройки базы данных (по умолчанию встроенная PostgreSQL)
postgresql['listen_address'] = 'localhost'
postgresql['port'] = 5432

# Настройки Redis
redis['port'] = 6379

# Настройки веб-сервера
nginx['enable'] = true
nginx['listen_port'] = 80

# Настройки мониторинга
prometheus['enable'] = true
node_exporter['enable'] = true
redis_exporter['enable'] = true
postgres_exporter['enable'] = true

# Лимиты памяти (настройте под свои нужды)
unicorn['worker_timeout'] = 60
unicorn['worker_processes'] = 2
sidekiq['concurrency'] = 25

# Резервные копии
gitlab_rails['backup_path'] = "/var/opt/gitlab/backups"
gitlab_rails['backup_keep_time'] = 604800

# Настройки SMTP (раскомментируйте и настройте при необходимости)
# gitlab_rails['smtp_enable'] = true
# gitlab_rails['smtp_address'] = "smtp.server.com"
# gitlab_rails['smtp_port'] = 587
# gitlab_rails['smtp_user_name'] = "smtp user"
# gitlab_rails['smtp_password'] = "smtp password"
# gitlab_rails['smtp_domain'] = "example.com"
# gitlab_rails['smtp_authentication'] = "login"
# gitlab_rails['smtp_enable_starttls_auto'] = true
# gitlab_rails['smtp_tls'] = false
